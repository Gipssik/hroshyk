{% extends 'cabinet.html' %}
{% load crispy_forms_filters %}
{% load static %}

{% block extra_head %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/donations.css' %}">
{% endblock %}

{% block cabinet-content %}
    <div class="donations">
        <a class="collapse-button" data-bs-toggle="collapse" href="#filters" role="button" aria-expanded="true" aria-controls="filters">
            <hr>
            <span>
                Фільтрування
            </span>
            <hr>
        </a>
        <form class="donations-form collapse show" method="get" id="filters">
            {{ filter.form|crispy }}
            <div class="buttons">
                <button type="submit" class="twitch-btn">
                    Пошук
                </button>
                <a href="{% url 'donations' %}" class="simple-btn">Скинути</a>
            </div>
        </form>
        <table class="donations-table">
            <thead>
            <tr>
                <th class="nickname">Нікнейм</th>
                <th class="amount">Сума</th>
                <th class="message">Повідомлення</th>
                <th class="created-at">Дата</th>
            </tr>
            </thead>
            <tbody>
            {% for donation in donations %}
                <tr>
                    <td class="nickname">{{ donation.nickname }}</td>
                    <td class="amount">{{ donation.amount }}</td>
                    <td class="message">{{ donation.message|truncatechars:30 }}</td>
                    <td class="created-at">{{ donation.created_at|date:'d.m.Y H:i' }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}