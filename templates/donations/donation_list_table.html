{% load i18n %}

<div hx-boost="true" hx-get="{% url 'donations' %}?{{ request.GET.urlencode }}" hx-trigger="every 30s" hx-swap="outerHTML">
    <table class="donations-table">
        <thead>
        <tr>
            <th class="nickname">{% trans 'Nickname' %}</th>
            <th class="amount">{% trans 'Amount' %}</th>
            <th class="message">{% trans 'Message' %}</th>
            <th class="created-at">{% trans 'Date' %}</th>
        </tr>
        </thead>
        <tbody>
        {% for donation in donations %}
            <tr class="clickable-row" hx-get="{% url 'donation_detail' donation.id %}"
                hx-target="main" hx-swap="innerHTML" hx-push-url="true"
            >
                <td class="nickname">{{ donation.nickname }}</td>
                <td class="amount">{{ donation.amount }}</td>
                <td class="message">{{ donation.message|truncatechars:30 }}</td>
                <td class="created-at">{{ donation.created_at|date:'d.m.Y H:i' }}</td>
            </tr>
        {% empty %}
            <tr>
                {% if request.GET.urlencode %}
                    <td colspan="4">{% trans 'We found nothing' %}.</td>
                {% else %}
                    <td colspan="4">{% trans 'You are broke, you have no hroshykiv' %}.</td>
                {% endif %}
            </tr>
        {% endfor %}

        </tbody>
    </table>
    {% include 'nav/pagination.html' %}
</div>