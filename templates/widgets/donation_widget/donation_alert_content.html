{% load widget_filters %}

<div class="donation-alert-container">
    <img src="{{ config.image.url }}" alt="Картинка">
    <h1 style="
            font-weight: 900;
            font-size: {{ config.title_font_size }}px;
            color: {{ config.title_color }};
            -webkit-text-stroke: 1px {{ config.title_shadow_color }};
            word-break: break-all;
            "
    >
        {% if donation %}
            {% format_string config.title_format nickname=donation.nickname amount=donation.amount %}
        {% else %}
            {% format_string config.title_format nickname="Anonymous" amount=100 %}
        {% endif %}

    </h1>
    <div style="
            font-weight: 900;
            font-size: {{ config.message_font_size }}px;
            color: {{ config.message_color }};
            -webkit-text-stroke: 1px {{ config.title_shadow_color }};
            word-wrap: break-word;
            text-align: center;
            "
    >
        {% if donation %}
            {{ donation.message|safe }}
        {% else %}
            Текст повідомлення
        {% endif %}
    </div>

    {% if donation %}
    	<audio id="audio" src="{{ config.sound.url }}"></audio>
        <script>
            clearTimeout(timeoutId)
            var audio = document.getElementById("audio")
            audio.volume = {{ config.sound_volume }} / 100
            audio.play()
            audio.onended = function() {
                triggerTimeout()
                document.getElementById('alert-container').innerHTML = ''
            }
        </script>
    {% endif %}
</div>
